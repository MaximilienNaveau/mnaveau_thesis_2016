% Copyright 2007 by Till Tantau
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.

\ProvidesPackageRCS $Header: beamerouterthememysmoothbars.sty,v d02a7cf4d8ae 2010/06/17 09:11:41 rivanvx $


\newif\ifbeamer@sb@subsection

\DeclareOptionBeamer{subsection}[true]{\csname beamer@sb@subsection#1\endcsname}
\ExecuteOptionsBeamer{subsection=true}
\ProcessOptionsBeamer

\definecolor{bgcolor1}{rgb}{0.9,0.,0.}
\definecolor{bgcolor2}{rgb}{0.9,0.,0.}

\definecolor{txtcolor1}{RGB}{204 ,  85 , 0}% corail
\definecolor{txtcolor2}{RGB}{231 ,  62 , 1}% orange 
\definecolor{txtcolor3}{RGB}{237 , 127 ,16}%
\definecolor{txtcolor4}{rgb}{0.9,0.,0.}

\definecolor{txtcolor5}{RGB}{102, 0, 153}%

\definecolor{corail}{RGB}{231 ,  62 , 1}

\setbeamercolor{background canvas}{bg=}
\setbeamercolor{alerted text}{bg=}
\setbeamercolor{background canvas}{bg=}
\setbeamercolor{block body alerted}{bg=}
\setbeamercolor{block body}{bg=}
\setbeamercolor{block body example}{bg=}
\setbeamercolor{block title alerted}{bg=}
\setbeamercolor{block title}{bg=}
\setbeamercolor{block title example}{bg=}
\setbeamercolor{fine separation line}{bg=}
\setbeamercolor{frametitle}{fg=txtcolor1,bg=,rounded}
\setbeamercolor{border}{fg=,bg=txtcolor1,rounded}
\setbeamercolor{inside}{fg=txtcolor1,bg=white,rounded}
\setbeamercolor{item projected}{bg=}
\setbeamercolor{normal text}{bg=}
\setbeamercolor{palette sidebar primary}{bg=}
\setbeamercolor{palette sidebar quaternary}{bg=}
\setbeamercolor{palette sidebar secondary}{bg=}
\setbeamercolor{palette sidebar tertiary}{bg=}
\setbeamercolor{section in sidebar}{bg=}
\setbeamercolor{section in sidebar shaded}{bg=}
\setbeamercolor{separation line}{bg=}
\setbeamercolor{sidebar}{bg=}
\setbeamercolor{sidebar}{bg=}
\setbeamercolor{structure}{bg=}
\setbeamercolor{subsection in sidebar}{bg=}
\setbeamercolor{subsection in sidebar shaded}{bg=}
\setbeamercolor{title}{fg=white,bg=txtcolor1}
\setbeamercolor{titlelike}{bg=}
\setbeamercolor{framesubtitle}{bg=}
\setbeamercolor{subsection in head/foot}{bg=}
\setbeamercolor{mysubsection in head/foot}{bg=}
\setbeamercolor{mysection in head/foot}{bg=}
\setbeamercolor{global}{bg=}

%\usefonttheme{default}
\usefonttheme{professionalfonts}
%\setbeamerfont{frametitle}{series=\bfseries,parent=structure}
\setbeamerfont{frametitle}{series=\bfseries,size={\fontsize{19}{22}}}
\setbeamerfont{framesubtitle}{series=\bfseries,size={\fontsize{10}{12}}}
%\setbeamerfont{author}{size=\scriptsize,series=\bfseries,parent=structure}
%\setbeamerfont{institute}{size=\scriptsize,series=\bfseries,parent=structure}
%\setbeamerfont{date}{size=\scriptsize,series=\bfseries,parent=structure}

\mode<presentation>


\beamer@compresstrue

\AtBeginDocument{
  {
    \usebeamerfont*{headline}
    %\colorlet{global.bg}{bg}
    \usebeamercolor{global}
    \usebeamercolor{subsection in head/foot}
    \usebeamercolor{section in head/foot}
    \usebeamercolor{frametitle}

    \ifbeamer@sb@subsection
      \pgfdeclareverticalshading{beamer@barshade}{\the\paperwidth}{%
         color(0ex)=(global.bg);%
         color(1ex)=(subsection in head/foot.bg);%
         color(3.25ex)=(subsection in head/foot.bg);%
         color(4.25ex)=(section in head/foot.bg);%
         color(9.75ex)=(section in head/foot.bg)%
       }
       \pgfdeclareverticalshading{beamer@aboveframetitle}{\the\paperwidth}{%
         color(0ex)=(frametitle.bg);%
         color(1ex)=(frametitle.bg);%
         color(2ex)=(subsection in head/foot.bg)
       }
    \else
      \pgfdeclareverticalshading{beamer@barshade}{\the\paperwidth}{%
         color(0ex)=(global.bg);%
         color(1ex)=(section in head/foot.bg);%
         color(7ex)=(section in head/foot.bg)%
       }
     \pgfdeclareverticalshading{beamer@aboveframetitle}{\the\paperwidth}{%
         color(0ex)=(frametitle.bg);%
         color(1ex)=(frametitle.bg);%
         color(2ex)=(section in head/foot.bg)
       }
    \fi  

    \pgfdeclareverticalshading{beamer@belowframetitle}{\the\paperwidth}{%
      color(0ex)=(global.bg);%
      color(1ex)=(frametitle.bg)
    }
  }
}

% Head
\defbeamertemplate*{headline}{mysmoothbars theme}
{%\insertsectionnavigationhorizontal{\linewidth}

  \begin{beamercolorbox}[ht=4ex,dp=1ex]{mysection in head/foot}
     %\insertnavigation{\paperwidth}  
   {\textbf{\insertnavigation{\linewidth}{}{}}\hfill
    %\insertframenumber/\inserttotalframenumber
    \hfill  }
  \end{beamercolorbox}
%  %
%  \ifbeamer@sb@subsection%
%    \begin{beamercolorbox}[ht=2ex,dp=1.125ex,%
%      leftskip=.3cm,rightskip=.3cm plus1fil]{mysubsection in head/foot}
%      
%      \usebeamercolor{mysubsection in head/foot}\insertsubsectionhead
%    \end{beamercolorbox}%
%  \fi%
}%

\newcommand{\logowidth}{0.5 cm}
\def\koroibotLogo{%
  \resizebox{!}{\logowidth}{\includegraphics{./logo/koroibot-logo}}
}
\def\GepettoLogo{%
  \resizebox{!}{\logowidth}{\includegraphics{./logo/logo-medium-white}}
}

% foot line
\defbeamertemplate*{footline}{mysmoothbars theme}
{%

  \begin{beamercolorbox}[ht=7ex,dp=2ex]{mysection in head/foot}
%    {\color{bgcolor1}\rule{\paperwidth}{1pt}}
%    \vskip1ex%

    %% write the gepetto logo then put the text 
    %% with slide number and put the koroibot logo
    \hfill \GepettoLogo \hfill
    \begin{minipage}{0.75\textwidth}
      \vspace*{-4ex}
      \begin{center}
%        \insertshorttitle \\
%        \insertauthor \hspace*{4.2cm} \insertframenumber / \inserttotalframenumber
        \insertauthor \hfill
        \insertshorttitle \hfill
        \insertframenumber / \inserttotalframenumber
      \end{center}
    \end{minipage}
    \hfill \koroibotLogo \hfill \hfill    
  \end{beamercolorbox}%
}%

%
%\defbeamertemplate*{frametitle}{mysmoothbars theme}
%{%
%\begin{center}
%  \vskip-2.5ex%
%  \begin{block}
%  {
%    \usebeamerfont*{frametitle}
%    \textbf{\insertframetitle}%
%      \ifx\insertframesubtitle\@empty%
%        \strut\par%
%      \else
%        \par{\usebeamerfont*{framesubtitle}{\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}\strut\par}%
%      \fi%%
%  }
%  \end{block}
%\end{center}
%}
%
%\defbeamertemplate*{frametitle}{mysmoothbars theme}
%{%
%  \@tempdima=\textwidth%  largeur boite interne
%  \advance\@tempdima by -1ex
%  \begin{beamercolorbox}[fg=txtcolor1, bg=txtcolor1, wd=\textwidth, ht=3.5ex,  sep=0.1ex, rounded=true, center]{bordure}
%    \begin{beamercolorbox}[fg=txtcolor1 , bg=white, colsep=0.1ex, sep=0.2ex, ht=2.5ex, wd=\@tempdima, rounded=true]{frametitle}
%    \begin{center}
%    \usebeamerfont*{frametitle}
%    \textbf{\insertframetitle}%
%      \ifx\insertframesubtitle\@empty%
%        \strut\par%
%      \else
%        \par{
%          \usebeamerfont*{framesubtitle}{
%            \usebeamercolor[fg]{framesubtitle}\insertframesubtitle
%          }
%          \strut\par}%
%      \fi
%      \end{center}
%    \end{beamercolorbox}
%  \end{beamercolorbox}
%}

%\makeatletter
%\pgfdeclareshape{myNode}{
%  \inheritsavedanchors[from=rectangle] % this is nearly a rectangle
%  \inheritanchorborder[from=rectangle]
%  \inheritanchor[from=rectangle]{center}
%  \inheritanchor[from=rectangle]{north}
%  \inheritanchor[from=rectangle]{south}
%  \inheritanchor[from=rectangle]{west}
%  \inheritanchor[from=rectangle]{east}
%  \backgroundpath{% this is new
%    % store lower right in xa/ya and upper right in xb/yb
%    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
%    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
%    % construct main path
%    \pgfsetcornersarced{\pgfpoint{5pt}{5pt}}
%    \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
%    \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
%    \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
%    \pgfsetcornersarced{\pgfpoint{5pt}{5pt}}
%    \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
%    \pgfpathclose
% }
%}
%\makeatother

%\ExplSyntaxOn
%\newcommand{\convertto}[2]{\fp_to_decimal:n { round ( (#2)/(1#1), 5 )} }
\defbeamertemplate*{frametitle}{mysmoothbars theme}
{%
\begin{center}
\begin{tikzpicture}[node distance = 2cm, auto,->=stealth,point/.style= 
                   {circle,fill=red,minimum size=0pt,inner sep=0pt}]
\tikzstyle{block} = [rectangle, draw,very thick,
    text centered, rounded corners, minimum height=1em]
\node [block] (title) {%
   \begin{varwidth}{15em}
     \centering
      \usebeamerfont*{frametitle}
      \textbf{\insertframetitle}%
   \end{varwidth}
};
\end{tikzpicture}\\
\begin{tikzpicture}[node distance = 2cm, auto,->=stealth,point/.style= 
                   {circle,fill=red,minimum size=0pt,inner sep=0pt}]
\ifx\insertframesubtitle\@empty%
  \strut\par%
\else
  \par{
    \node (subtitle) {%
      \begin{varwidth}{15em}
        \centering
        \usebeamerfont*{framesubtitle}{
          \usebeamercolor[fg]{framesubtitle}\insertframesubtitle
        }
        \strut\par    
      \end{varwidth}
    };
  }%
\fi
\end{tikzpicture}
\end{center}
%
%  \begin{tikzpicture}
%    \node[draw,shape=myNode, minimum width=\textwidth] {
%      \usebeamerfont*{frametitle}
%      \textbf{\insertframetitle}%
%      \ifx\insertframesubtitle\@empty%
%        \strut\par%
%      \else
%        \par{
%          \usebeamerfont*{framesubtitle}{
%            \usebeamercolor[fg]{framesubtitle}\insertframesubtitle
%          }
%          \strut\par
%        }%
%      \fi
%    };
%  \end{tikzpicture}
%  \end{center}
}
  
\mode
<all>
