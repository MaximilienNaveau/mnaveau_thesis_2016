
\begin{frame}{Multicontact Locomotion}
\framesubtitle{
  \textcolor{green!30!black!80}{
    (M. Kudruss, Humanoids 2015)  ;
    (J. Carpentier, ICRA 2016)
  }
}

\begin{center}
  \includegraphics[height=0.38\textheight]{multicontact/cover.pdf}
  \scalebox{0.3}{\input{./figures/multicontact/tikz/escalier.tex}}
\end{center}
\vspace*{-0.5cm}
\begin{center}
  \scalebox{0.7}{\input{./figures/multicontact/tikz/feedback_scheme.tex}}
\end{center}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{frame}{The formulation of the dynamics}

\begin{itemize}

\item The dynamic constraint \textcolor{txtcolor2}{(M. Kudruss, Humanoids 2015)} :
\begin{scriptsize}
\begin{align*}
  m
  \begin{bmatrix}
  \ddcom - {\bf g} \\
  \com \times (\ddcom - {\bf g})
  \end{bmatrix}
  +
  \begin{bmatrix}
   {\bf 0} \\
     \textcolor{txtcolor2}{{\bf I}_c \dot{\omega} - \sigma}
  \end{bmatrix}
  =
  \begin{bmatrix}
  \sum_{i=1}^{M}
  \Qf \ff \\
  \sum_{i=1}^{M}
  \pf \times \Qf  \ff
  \end{bmatrix}
\end{align*}
\end{scriptsize}
\item the state :
$
\begin{bmatrix}
\com & \dcom & \textcolor{txtcolor2}{\omega}
\end{bmatrix}^T
$
\item the controls :
$
\begin{bmatrix}
\ff & \textcolor{txtcolor2}{\sigma}
\end{bmatrix}^T
$

\textcolor{txtcolor1}{\hrule}
\vspace*{0.5cm}

\item The dynamic constraint \textcolor{txtcolor5}{(J. Carpentier, ICRA 2016)} :
\begin{scriptsize}
\begin{align*}
  m
  \begin{bmatrix}
  \ddcom - {\bf g} \\
  \com \times (\ddcom - {\bf g})
  \end{bmatrix}
  +
  \begin{bmatrix}
   {\bf 0} \\
   \textcolor{txtcolor5}{ \dot{\mathcal{L}} }
  \end{bmatrix}
  =
  \begin{bmatrix}
  \sum_{i=1}^{M}
  \Qf \ff \\
  \sum_{i=1}^{M}
  \pf \times \Qf  \ff +
  \textcolor{txtcolor5}{ \Qf \tauf}
  \end{bmatrix}
\end{align*}
\end{scriptsize}
\item the state :
$
\begin{bmatrix}
\com & {\bf h}=m\dcom & \textcolor{txtcolor5}{\mathcal{L}}
\end{bmatrix}^T
$
\item the controls :
$
\begin{bmatrix}
\ff & \textcolor{txtcolor5}{\tauf}
\end{bmatrix}^T
$

\end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{The optimal control problem}
\vspace*{-0.5cm}
\begin{columns}
\begin{column}{0.5\textwidth}

\begin{itemize}
\item \textcolor{txtcolor2}{(M. Kudruss, Humanoids 2015)}
\end{itemize}
%
\begin{subequations}
\begin{eqnarray*}
\hspace{0em}	\underset{\substack{\hspace{0.2em} \underline{\bm x}, \; \underline{\bm u}} }{\min } \ \ \
	& & \hspace{-4em} \int_{0}^{T}
%	{\scriptstyle
	  \textcolor{red!70!black}{||\dcom||^2_2 +
	  ||{\omega}||^2_2} +
    \textcolor{orange!70!black}{\ell_2\,_{kin}} \\
    & & \hspace{-3em} +
    \textcolor{green!50!black}{||{\dot{\omega}}||^2_2} +
    \textcolor{purple!100!blue!100}{||{\ddcom}||^2_2}
%  }
  dt  \\[1em]
	s.t.
	&  \forall t,i& \ff \in \mathcal{K}_i^{\textcolor{blue!50!green!100!black}{3D}} \\
  &  \forall t& \textcolor{orange!70!black}{\com ,\; \dcom} ,\; {\omega} \in \mathcal{B}_x \\ 
  &  \forall t,i& {\ff ,\; {\sigma}} \in \mathcal{B}_u    \\[1em]
  & \forall t & \dot{\bm{x}} = {dyn}(\bm x, \bm u)  \\	
	& & \hspace{-4em} \bm x(0) = \bm x_{0} \; ; \; \bm x(T) \in \mathcal{X}_* 
\end{eqnarray*}
\end{subequations}

\end{column}
%
{\color{txtcolor2}\vrule}
%
%
\begin{column}{0.5\textwidth}

\begin{itemize}
\item \textcolor{txtcolor5}{(J. Carpentier, ICRA 2016)}
\end{itemize}
%
\begin{subequations}
\begin{eqnarray*}
\hspace{0em}	\underset{\substack{\hspace{0.2em} \underline{\bm x}, \; \underline{\bm u}} }{\min } \ \ \  
	& & \hspace{-4em} \int_{0}^{T}
%	{\scriptstyle
    \textcolor{red!70!black}{||m\dcom||^2_2} +
  	  \textcolor{orange!70!black}{\text{exp}_{kin}} \\
  	  & & \hspace{-3em} +
    \textcolor{green!50!black}{||{\dot{\mathcal{L}}}||^2_2} +
	  \textcolor{purple!100!blue!100}{||{\ff}||^2_2} 
%  }
  dt  \\[1em]
	s.t.
	&  \forall t,i& [\ff \;\; {\tauf}] \in \mathcal{K}_i^{\textcolor{blue!50!green!100!black}{6D}} \\
  &  \forall t& {{\mathcal{L}}} \in \mathcal{B}_{\mathcal{L}}    \\ 
  &  \forall t& {\ff ,\; {\tauf}} \in \mathcal{B}_u    \\ [1em]
  & \forall t,i & \dot{\bm{x}} = {dyn}(\bm x, \bm u)  \\	
	& & \hspace{-4em} \bm x(0) = \bm x_{0} \; ; \; \bm x(T) \in \mathcal{X}_* 
\end{eqnarray*}
\end{subequations}

\end{column}
\end{columns}


\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Experiment on HRP2}
  \begin{center}
    \movie[autostart,loop]{
    \includegraphics[width=0.8\linewidth, keepaspectratio]
      {multicontact/15-ichr-multicontact.png}
    }  
    {videos/multicontact-short.mp4}
  \end{center}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%\begin{equation}
%  m
%  \begin{bmatrix}
%  \ddcom - {\bf g} \\
%  \com \times (\ddcom - {\bf g})
%  \end{bmatrix}
%  +
%  \begin{bmatrix}
%  {\bf 0} \\
%  \tikz[baseline]{
%      \node[anchor=base] (l) {$ \dot{\mathcal{L}} $} ;
%      %
%      \draw [draw,-,color=red!50,thick] ([xshift=-0.2cm,yshift= 0.2cm]l.center) -- node {}     ([xshift= 0.2cm,yshift=-0.2cm]l.center);
%      %
%      \draw [draw,-,color=red!50,thick] ([xshift=-0.2cm,yshift=-0.2cm]l.center) -- node {}     ([xshift= 0.2cm,yshift= 0.2cm]l.center);
%    }
%  \end{bmatrix}
%  =
%  \begin{bmatrix}
%  \sum_{i=1}^{M}
%  \Qf \ff \\
%  \sum_{i=1}^{M}
%  \pf \times \Qf  \ff
%  \end{bmatrix}
%\end{equation}